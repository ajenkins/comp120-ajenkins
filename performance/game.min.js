function start_game(){width=399;height=600;frogSprite=new Object;frogSprite.x=11;frogSprite.y=335;frogSprite.width=22;frogSprite.height=22;init_frogX=width/2-frogSprite.width/2;frogX=init_frogX;frogY=height-100;hop=33;farthest=0;hopsUp=0;log_short=new Object;log_short.srcX=7;log_short.srcY=231;log_short.width=84;log_short.height=21;log_short.x=150;log_short.y=270;log_short.velocity=3;log_short2=jQuery.extend(true,{},log_short);log_short3=jQuery.extend(true,{},log_short);log_short2.x=0;log_short3.x=300;log_short4=jQuery.extend(true,{},log_short);log_short4.y=172;log_short4.velocity=-3;log_short5=jQuery.extend(true,{},log_short4);log_short6=jQuery.extend(true,{},log_short4);log_short5.x=0;log_short6.x=300;logs_short=[log_short,log_short2,log_short3,log_short4,log_short5,log_short6];log_medium=new Object;log_medium.srcX=7;log_medium.srcY=197;log_medium.width=117;log_medium.height=22;log_medium.x=0;log_medium.y=103;log_medium.velocity=-4;log_medium2=jQuery.extend(true,{},log_medium);log_medium2.x=150;log_medium3=jQuery.extend(true,{},log_medium);log_medium3.x=300;log_medium4=jQuery.extend(true,{},log_medium);log_medium4.x=100;log_medium4.y=235;log_medium4.velocity=-4;log_medium5=jQuery.extend(true,{},log_medium4);log_medium5.x=250;log_medium6=jQuery.extend(true,{},log_medium4);log_medium6.x=399;logs_medium=[log_medium,log_medium2,log_medium3,log_medium4,log_medium5,log_medium6];log_long=new Object;log_long.srcX=7;log_long.srcY=166;log_long.width=178;log_long.height=23;log_long.x=0;log_long.y=137;log_long.velocity=3;log_long2=jQuery.extend(true,{},log_long);log_long2.x=450;log_long3=jQuery.extend(true,{},log_long);log_long.x=100;log_long3.y=204;log_long3.velocity=3;log_long4=jQuery.extend(true,{},log_long3);log_long4.x=399;logs_long=[log_long,log_long2,log_long3,log_long4];all_logs=new Array;all_logs.push.apply(all_logs,logs_short);all_logs.push.apply(all_logs,logs_medium);all_logs.push.apply(all_logs,logs_long);car_yellow=new Object;car_yellow.srcX=82;car_yellow.srcY=265;car_yellow.width=25;car_yellow.height=24;car_yellow.x=150;car_yellow.y=460;car_yellow.velocity=-2;car_yellow2=jQuery.extend(true,{},car_yellow);car_yellow2.x=50;car_yellow3=jQuery.extend(true,{},car_yellow);car_yellow3.x=250;cars_yellow=[car_yellow,car_yellow2,car_yellow3];car_tractor=jQuery.extend(true,{},car_yellow);car_tractor.srcX=74;car_tractor.srcY=301;car_tractor.width=23;car_tractor.height=21;car_tractor.x=50;car_tractor.y=430;car_tractor.velocity=3;car_tractor2=jQuery.extend(true,{},car_tractor);car_tractor3=jQuery.extend(true,{},car_tractor);car_tractor2.x=150;car_tractor3.x=250;cars_tractor=[car_tractor,car_tractor2,car_tractor3];car_purple=new Object;car_purple.srcX=9;car_purple.srcY=267;car_purple.width=27;car_purple.height=20;car_purple.x=0;car_purple.y=400;car_purple.velocity=-3;car_purple2=jQuery.extend(true,{},car_purple);car_purple3=jQuery.extend(true,{},car_purple);car_purple2.x=100;car_purple3.x=200;cars_purple=[car_purple,car_purple2,car_purple3];car_white=new Object;car_white.srcX=47;car_white.srcY=264;car_white.width=27;car_white.height=25;car_white.x=0;car_white.y=365;car_white.velocity=3;car_white2=jQuery.extend(true,{},car_white);car_white3=jQuery.extend(true,{},car_white);car_white2.x=100;car_white3.x=200;cars_white=[car_white,car_white2,car_white3];car_truck=new Object;car_truck.srcX=106;car_truck.srcY=303;car_truck.width=46;car_truck.height=18;car_truck.x=50;car_truck.y=340;car_truck.velocity=-3;car_truck2=jQuery.extend(true,{},car_truck);car_truck.x=200;cars_truck=[car_truck,car_truck2];all_cars=new Array;all_cars.push.apply(all_cars,cars_yellow);all_cars.push.apply(all_cars,cars_tractor);all_cars.push.apply(all_cars,cars_purple);all_cars.push.apply(all_cars,cars_white);all_cars.push.apply(all_cars,cars_truck);lily_pad=new Object;lily_pad.srcX=262;lily_pad.srcY=323;lily_pad.width=26;lily_pad.height=26;lily_pad.x=15;lily_pad.y=65;lily_pad2=jQuery.extend(true,{},lily_pad);lily_pad2.x=100;lily_pad3=jQuery.extend(true,{},lily_pad);lily_pad3.x=185;lily_pad4=jQuery.extend(true,{},lily_pad);lily_pad4.x=269;lily_pad5=jQuery.extend(true,{},lily_pad);lily_pad5.x=354;lily_pads=[lily_pad,lily_pad2,lily_pad3,lily_pad4,lily_pad5];lives=3;level=1;score=0;if(localStorage["highscore"])highscore=localStorage["highscore"];else highscore=0;date=new Date;startTime=date.getTime();canvas=document.getElementById("game");ctx=canvas.getContext("2d");img=new Image;imgLoaded=false;img.src="assets/frogger_sprites.png";img.onload=function(){imgLoaded=true};$("#game_div").append("<audio src='assets/song.ogg' autoplay loop=true></audio>");audioElement=document.createElement("audio");audioElement.setAttribute("src","assets/jump.wav");audioElement.load();addListeners();gameLoop()}function levelUp(){hopsUp=0;farthest=0;if(level%5==0){score+=1e3}else{score+=50}level+=1;clearInterval(timer);setTimeout(winReset,1e3)}function winReset(){frogX=init_frogX;frogY=height-100;gameLoop()}function moveFrog(e){audioElement.play();setTimeout(function(){audioElement.pause();audioElement.currentTime=0},100);switch(e){case"left":frogSprite.x=81;frogSprite.y=336;if(frogX>22){frogX-=hop}break;case"up":frogSprite.x=12;frogSprite.y=367;if(frogY>22){frogY-=hop;hopsUp++;if(hopsUp>farthest){farthest=hopsUp;score+=10}}break;case"right":frogSprite.x=11;frogSprite.y=335;if(frogX<width-40){frogX+=hop}break;case"down":if(hopsUp>0)hopsUp--;frogSprite.x=81;frogSprite.y=365;if(frogY<height-100){frogY+=hop}break}}function gameSeconds(){return(getTime()-startTime)/1e3}function renderGame(){ctx.fillStyle="#191970";ctx.fillRect(0,60,399,300);ctx.fillStyle="black";ctx.fillRect(0,300,399,300);ctx.fillStyle=ctx.fillRect(0,0,399,40);ctx.fillStyle="#0f0";ctx.font="16pt Arial";ctx.fillText("Level "+level,75,height-60);ctx.font="12pt Arial";ctx.fillText("Score: "+score,0,height-40);ctx.fillText("Highscore: "+highscore,100,height-40);if(imgLoaded){ctx.drawImage(img,0,55,399,52,0,45,399,52);ctx.drawImage(img,0,0,399,54,23,-8,399,54);ctx.drawImage(img,0,122,399,34,0,295,399,34);ctx.drawImage(img,0,122,399,34,0,490,399,34);for(e=0;e<lives;e++){ctx.drawImage(img,13,336,17,22,25*e,height-75,17,22)}for(var e=0;e<all_logs.length;e++)drawObject(all_logs[e]);for(var e=0;e<lily_pads.length;e++)drawObject(lily_pads[e]);ctx.drawImage(img,frogSprite.x,frogSprite.y,frogSprite.width,frogSprite.height,frogX,frogY,frogSprite.width,frogSprite.height);for(var e=0;e<all_cars.length;e++)drawObject(all_cars[e])}}function addListeners(){$(document).keydown(function(e){switch(e.which){case 37:moveFrog("left");break;case 38:e.preventDefault();moveFrog("up");break;case 39:moveFrog("right");break;case 40:e.preventDefault();moveFrog("down");break;case 32:e.preventDefault();isGameover=true;break}})}function drawObject(e){ctx.drawImage(img,e.srcX,e.srcY,e.width,e.height,e.x,e.y,e.width,e.height)}function moveObject(e){if(e.velocity>0){if(e.x<width+e.width){e.x+=e.velocity}else{e.x=-e.width}}else if(e.velocity<0){if(e.x>-e.width){e.x+=e.velocity}else{e.x=width+e.width}}}function isFrogOverlapping(e){if(frogX+frogSprite.width>e.x&&frogY+frogSprite.height>e.y&&frogX<e.x+e.width&&frogY<e.y+e.height){return true}else if(frogX<e.x+e.width&&frogY+frogSprite.height>e.y&&frogX+frogSprite.width>e.x&&frogY<e.y+e.height){return true}else{return false}}function FrogOnLogVelocity(){var e=0;for(var t=0;t<all_logs.length;t++){if(isFrogOverlapping(all_logs[t])){e=all_logs[t].velocity;break}}return e}function onLilyPad(){var e=false;for(var t=0;t<lily_pads.length;t++){if(isFrogOverlapping(lily_pads[t])){e=true;break}}return e}function killFrog(){audioElement.play();frogSprite.x=264;frogSprite.y=371;frogSprite.width=19;frogSprite.height=26;clearInterval(timer);setTimeout(resetFrog,1e3)}function resetFrog(){frogX=init_frogX;frogY=height-100;hopsUp=0;farthest=0;frogSprite.x=11;frogSprite.y=335;frogSprite.width=22;frogSprite.height=22;lives--;if(lives==0){lives=3;level=1;if(score>highscore)highscore=score;localStorage["highscore"]=highscore;score=0;date=new Date;startTime=date.getTime()}date=new Date;startTime=date.getTime();gameLoop()}function updateGame(){for(var e=0;e<all_logs.length;e++)moveObject(all_logs[e]);for(var e=0;e<all_cars.length;e++){moveObject(all_cars[e]);if(isFrogOverlapping(all_cars[e]))killFrog()}if(frogY<300){if(onLilyPad()){levelUp()}else{logSpeed=FrogOnLogVelocity();if(logSpeed!=0)frogX+=logSpeed;else killFrog()}}renderGame()}function gameLoop(){timer=setInterval(updateGame,33)}$(document).ready(start_game)